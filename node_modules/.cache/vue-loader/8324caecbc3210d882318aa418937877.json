{"remainingRequest":"/home/kali/fronted_player/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kali/fronted_player/src/components/GameBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kali/fronted_player/src/components/GameBox.vue","mtime":1725546369873},{"path":"/home/kali/fronted_player/node_modules/cache-loader/dist/cjs.js","mtime":1718176688802},{"path":"/home/kali/fronted_player/node_modules/babel-loader/lib/index.js","mtime":1718176688789},{"path":"/home/kali/fronted_player/node_modules/vuetify-loader/lib/loader.js","mtime":1718176689266},{"path":"/home/kali/fronted_player/node_modules/cache-loader/dist/cjs.js","mtime":1718176688802},{"path":"/home/kali/fronted_player/node_modules/vue-loader/lib/index.js","mtime":1718176689251}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJHYW1lQm94IiwKICAgICRhY3RpdmVEaWFsb2dJZDogbnVsbCwKCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNob3dEZXRhaWw6IGZhbHNlLAogICAgICAgICAgICBnYW1lQm94ZXM6IG51bGwsCiAgICAgICAgICAgIGdhbWVCb3hEZXRhaWw6IHsKICAgICAgICAgICAgICAgIFRpdGxlOiAnJywKICAgICAgICAgICAgICAgIElQOiAnJywKICAgICAgICAgICAgICAgIFBvcnQ6ICcnLAogICAgICAgICAgICAgICAgRGVzY3JpcHRpb246ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLCAgLy8gQ29udHJvbCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgZGlhbG9nCiAgICAgICAgICAgIHRpbWVyOiBudWxsLAoKICAgICAgICAgICAgaW5mbzogbnVsbCwKICAgICAgICAgICAgc3RhcnRGb3JtOiB7CiAgICAgICAgICAgICAgICBGcm9tOiBudWxsLAogICAgICAgICAgICAgICAgVG86IG51bGwsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBzaG93RGlhbG9nKGdhbWVCb3gpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZ2FtZUJveCk7CiAgICAgICAgICAgIHRoaXMuZ2FtZUJveERldGFpbCA9IGdhbWVCb3g7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7ICAvLyBTaG93IHRoZSBkaWFsb2cKICAgICAgICB9LAoKICAgICAgICBjbG9zZURpYWxvZygpIHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7ICAvLyBIaWRlIHRoZSBkaWFsb2cKICAgICAgICB9LAoKICAgICAgICBnZXRHYW1lYm94ZXMoKSB7CiAgICAgICAgICAgIHRoaXMudXRpbHMuR0VUKCIvdGVhbS9nYW1lYm94ZXMiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmdhbWVCb3hlcyA9IHJlczsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0SW5mbygpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5HRVQoIi90ZWFtL2luZm8iKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmluZm8gPSByZXMKICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBzdGFydCgpIHsKICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuUE9TVCgnL3RlYW0vc3RhcnQnLCB0aGlzLnN0YXJ0Rm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMpCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgYWN0aXZhdGVCb3goaWQpIHsKICAgICAgICAgICAgdGhpcy4kYWN0aXZlRGlhbG9nSWQgPSBpZDsKICAgICAgICAgICAgdGhpcy5zdGFydEZvcm0uRnJvbSA9IHRoaXMuaW5mby5JZDsKICAgICAgICAgICAgdGhpcy5zdGFydEZvcm0uVG8gPSBpZDsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kYWN0aXZlRGlhbG9nSWQpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQWN0aXZhdGluZyBib3ggd2l0aCBJRDogJHtpZH1gKTsKICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgIH0sCgoKICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldEdhbWVib3hlcygpOwogICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLmdldEdhbWVib3hlcywgNTAwMCk7CiAgICAgICAgdGhpcy5nZXRJbmZvKCkKICAgIH0sCgogICAgYmVmb3JlRGVzdHJveSgpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgfQp9Cg=="},{"version":3,"sources":["GameBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"GameBox.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <!-- 靶機資訊 -->\n        <div v-if=\"gameBoxes !== null\">\n            <v-list-item v-for=\"gameBox in gameBoxes\" :key=\"gameBox.ID\" @click=\"showDialog(gameBox)\">\n                <v-list-item-content>\n                    <v-list-item-title v-text=\"gameBox.Title\"/>\n                    <v-list-item-subtitle>{{gameBox.IP}}:{{gameBox.Port}}</v-list-item-subtitle>\n                    <v-list-item-subtitle>{{utils.FormatFloat(gameBox.Score)}} {{$t('general.score')}}</v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                    <div v-if=\"!gameBox.IsAttacked && !gameBox.IsDown\">\n                        <v-chip class=\"ma-2\" color=\"green\" text-color=\"green\" outlined>Online</v-chip>\n                    </div>\n                    <div v-if=\"gameBox.IsDown\">\n                        <v-chip class=\"ma-2\" color=\"orange\" text-color=\"orange\" outlined>Down</v-chip>\n                    </div>\n                    <div v-if=\"gameBox.IsAttacked\">\n                        <v-chip class=\"ma-2\" color=\"red\" text-color=\"red\" outlined>Attacked</v-chip>\n                    </div>\n                </v-list-item-action>\n            </v-list-item>\n        </div>\n        <v-list-item v-if=\"gameBoxes === null || gameBoxes.length === 0\">\n            <p>{{$t('gamebox.empty')}}</p>\n        </v-list-item>\n\n        <!-- 靶機詳細資訊 -->\n        <v-dialog v-model=\"dialogVisible\" persistent width=\"500\">\n            <v-card>\n                <v-card-title class=\"headline\" primary-title>\n                    {{ gameBoxDetail.Title }}\n                </v-card-title>\n                <v-card-text v-if=\"$activeDialogId === gameBoxDetail.ChallengeID\">\n                    <p><b>{{gameBoxDetail.IP}}:{{gameBoxDetail.Port}}</b></p>\n                    <v-textarea filled auto-grow rows=\"4\" shaped :disabled=\"true\"\n                                v-model=\"gameBoxDetail.Description\"></v-textarea>\n                </v-card-text>\n                <v-divider/>\n                <v-card-actions>\n                    <v-btn color=\"primary\" text @click=\"activateBox(gameBoxDetail.ChallengeID)\">{{$t('general.start')}}</v-btn>\n                    <v-spacer/>\n                    <v-btn color=\"primary\" text @click=\"closeDialog\">{{$t('general.close')}}</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </div>\n</template>\n\n\n<script>\nexport default {\n    name: \"GameBox\",\n    $activeDialogId: null,\n\n    data() {\n        return {\n            showDetail: false,\n            gameBoxes: null,\n            gameBoxDetail: {\n                Title: '',\n                IP: '',\n                Port: '',\n                Description: ''\n            },\n            dialogVisible: false,  // Control the visibility of the dialog\n            timer: null,\n\n            info: null,\n            startForm: {\n                From: null,\n                To: null,\n            }\n        }\n    },\n\n    methods: {\n        showDialog(gameBox) {\n            // console.log(gameBox);\n            this.gameBoxDetail = gameBox;\n            this.dialogVisible = true;  // Show the dialog\n        },\n\n        closeDialog() {\n            this.dialogVisible = false;  // Hide the dialog\n        },\n\n        getGameboxes() {\n            this.utils.GET(\"/team/gameboxes\").then(res => {\n                this.gameBoxes = res;\n            });\n        },\n\n        getInfo() {\n            this.utils.GET(\"/team/info\").then(res => {\n                this.info = res\n            })\n        },\n\n        start() {\n                this.utils.POST('/team/start', this.startForm).then(res => {\n                    this.$message.success(res)\n                }).catch(err => {\n                    this.$message.error(err);\n                })\n        },\n\n        activateBox(id) {\n            this.$activeDialogId = id;\n            this.startForm.From = this.info.Id;\n            this.startForm.To = id;\n            // console.log(this.$activeDialogId);\n            // console.log(`Activating box with ID: ${id}`);\n            this.start();\n        },\n\n\n    },\n\n    mounted() {\n        this.getGameboxes();\n        this.timer = setInterval(this.getGameboxes, 5000);\n        this.getInfo()\n    },\n\n    beforeDestroy() {\n        clearInterval(this.timer);\n    }\n}\n</script>\n\n\n\n<style scoped>\n\n</style>"]}]}