{"remainingRequest":"/home/kali/fronted_player/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kali/fronted_player/src/components/GameBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kali/fronted_player/src/components/GameBox.vue","mtime":1725797394770},{"path":"/home/kali/fronted_player/node_modules/cache-loader/dist/cjs.js","mtime":1718176688802},{"path":"/home/kali/fronted_player/node_modules/babel-loader/lib/index.js","mtime":1718176688789},{"path":"/home/kali/fronted_player/node_modules/vuetify-loader/lib/loader.js","mtime":1718176689266},{"path":"/home/kali/fronted_player/node_modules/cache-loader/dist/cjs.js","mtime":1718176688802},{"path":"/home/kali/fronted_player/node_modules/vue-loader/lib/index.js","mtime":1718176689251}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vcm91dGVyLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkdhbWVCb3giLAogICAgJGFjdGl2ZURpYWxvZ0lkOiBudWxsLAoKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvd0RldGFpbDogZmFsc2UsCiAgICAgICAgICAgIGdhbWVCb3hlczogbnVsbCwKICAgICAgICAgICAgZ2FtZUJveERldGFpbDogewogICAgICAgICAgICAgICAgVGl0bGU6ICcnLAogICAgICAgICAgICAgICAgSVA6ICcnLAogICAgICAgICAgICAgICAgUG9ydDogJycsCiAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbjogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsICAvLyBDb250cm9sIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBkaWFsb2cKICAgICAgICAgICAgdGltZXI6IG51bGwsCgogICAgICAgICAgICBpbmZvOiBudWxsLAogICAgICAgICAgICBzdGFydEZvcm06IHsKICAgICAgICAgICAgICAgIEZyb206IG51bGwsCiAgICAgICAgICAgICAgICBUbzogbnVsbCwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHN0YXJ0VGltZTogbnVsbCwKICAgICAgICAgICAgZW5kVGltZTogbnVsbCwKICAgICAgICB9CiAgICB9LAogICAgCgogICAgbWV0aG9kczogewogICAgICAgIHNob3dEaWFsb2coZ2FtZUJveCkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhnYW1lQm94KTsKICAgICAgICAgICAgdGhpcy5nYW1lQm94RGV0YWlsID0gZ2FtZUJveDsKICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsgIC8vIFNob3cgdGhlIGRpYWxvZwogICAgICAgIH0sCgogICAgICAgIGNsb3NlRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsgIC8vIEhpZGUgdGhlIGRpYWxvZwogICAgICAgIH0sCgogICAgICAgIGdldEdhbWVib3hlcygpIHsKICAgICAgICAgICAgdGhpcy51dGlscy5HRVQoIi90ZWFtL2dhbWVib3hlcyIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZ2FtZUJveGVzID0gcmVzLm1hcChnYW1lQm94ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAuLi5nYW1lQm94LAogICAgICAgICAgICAgICAgICAgICAgICBJc0F0dGFja2VkOiAhIWdhbWVCb3guSXNBdHRhY2tlZCwgIC8vIOeiuuS/neWxrOaAp+aYr+WPjeaHieW8jwogICAgICAgICAgICAgICAgICAgICAgICBJc0Rvd246ICEhZ2FtZUJveC5Jc0Rvd24KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGdldEluZm8oKSB7CiAgICAgICAgICAgIHRoaXMudXRpbHMuR0VUKCIvdGVhbS9pbmZvIikudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pbmZvID0gcmVzCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgc3RhcnQoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLlBPU1QoJy90ZWFtL3N0YXJ0JywgdGhpcy5zdGFydEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzKQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIGFjdGl2YXRlQm94KGlkKSB7CiAgICAgICAgICAgIHRoaXMuJGFjdGl2ZURpYWxvZ0lkID0gaWQ7CiAgICAgICAgICAgIHRoaXMuc3RhcnRGb3JtLkZyb20gPSB0aGlzLmluZm8uSWQ7CiAgICAgICAgICAgIHRoaXMuc3RhcnRGb3JtLlRvID0gaWQ7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJGFjdGl2ZURpYWxvZ0lkKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKWBBY3RpdmF0aW5nIGJveCB3aXRoIElEOiAke2lkfWApOwogICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7ICAvLyDntIDpjITmjInkuIvplovlp4vmjInpiJXnmoTmmYLplpPmiLMKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3N0YXJ0LXRpbWUnLCB0aGlzLnN0YXJ0VGltZSk7CiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICB9LAoKCiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRHYW1lYm94ZXMoKTsKICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5nZXRHYW1lYm94ZXMsIDUwMDApOwogICAgICAgIHRoaXMuZ2V0SW5mbygpCiAgICB9LAoKICAgIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIH0KfQo="},{"version":3,"sources":["GameBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"GameBox.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <!-- 靶機資訊 -->\n        <div v-if=\"gameBoxes !== null\">\n            <v-list-item v-for=\"gameBox in gameBoxes\" :key=\"gameBox.ID\" @click=\"showDialog(gameBox)\">\n                <v-list-item-content>\n                    <v-list-item-title v-text=\"gameBox.Title\"/>\n                    <v-list-item-subtitle>{{gameBox.IP}}:{{gameBox.Port}}</v-list-item-subtitle>\n                    <v-list-item-subtitle>{{utils.FormatFloat(gameBox.Score)}} {{$t('general.score')}}</v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                    <div v-if=\"!gameBox.IsAttacked && !gameBox.IsDown\">\n                        <v-chip class=\"ma-2\" color=\"green\" text-color=\"green\" outlined>Online</v-chip>\n                    </div>\n                    <div v-if=\"gameBox.IsDown\">\n                        <v-chip class=\"ma-2\" color=\"orange\" text-color=\"orange\" outlined>Down</v-chip>\n                    </div>\n                    <div v-if=\"gameBox.IsAttacked\">\n                        <v-chip class=\"ma-2\" color=\"red\" text-color=\"red\" outlined>Solved</v-chip>\n                    </div>\n                </v-list-item-action>\n            </v-list-item>\n        </div>\n        <v-list-item v-if=\"gameBoxes === null || gameBoxes.length === 0\">\n            <p>{{$t('gamebox.empty')}}</p>\n        </v-list-item>\n\n        <!-- 靶機詳細資訊 -->\n        <v-dialog v-model=\"dialogVisible\" persistent width=\"500\">\n            <v-card>\n                <v-card-title class=\"headline\" primary-title>\n                    {{ gameBoxDetail.Title }}\n                </v-card-title>\n                <v-card-text v-if=\"$activeDialogId === gameBoxDetail.ChallengeID\">\n                    <p><b>{{gameBoxDetail.IP}}:{{gameBoxDetail.Port}}</b></p>\n                    <v-textarea filled auto-grow rows=\"4\" shaped :disabled=\"true\"\n                                v-model=\"gameBoxDetail.Description\"></v-textarea>\n                </v-card-text>\n                <v-divider/>\n                <v-card-actions>\n                    <v-btn color=\"primary\" text @click=\"activateBox(gameBoxDetail.ChallengeID)\">{{$t('general.start')}}</v-btn>\n                    <v-spacer/>\n                    <v-btn color=\"primary\" text @click=\"closeDialog\">{{$t('general.close')}}</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </div>\n</template>\n\n\n<script>\nimport { EventBus } from '../router.js';\nexport default {\n    name: \"GameBox\",\n    $activeDialogId: null,\n\n    data() {\n        return {\n            showDetail: false,\n            gameBoxes: null,\n            gameBoxDetail: {\n                Title: '',\n                IP: '',\n                Port: '',\n                Description: ''\n            },\n            dialogVisible: false,  // Control the visibility of the dialog\n            timer: null,\n\n            info: null,\n            startForm: {\n                From: null,\n                To: null,\n            },\n\n            startTime: null,\n            endTime: null,\n        }\n    },\n    \n\n    methods: {\n        showDialog(gameBox) {\n            // console.log(gameBox);\n            this.gameBoxDetail = gameBox;\n            this.dialogVisible = true;  // Show the dialog\n        },\n\n        closeDialog() {\n            this.dialogVisible = false;  // Hide the dialog\n        },\n\n        getGameboxes() {\n            this.utils.GET(\"/team/gameboxes\").then(res => {\n                this.gameBoxes = res.map(gameBox => {\n                    return {\n                        ...gameBox,\n                        IsAttacked: !!gameBox.IsAttacked,  // 確保屬性是反應式\n                        IsDown: !!gameBox.IsDown\n                    };\n                });\n            });\n        },\n\n        getInfo() {\n            this.utils.GET(\"/team/info\").then(res => {\n                this.info = res\n            })\n        },\n\n        start() {\n                this.utils.POST('/team/start', this.startForm).then(res => {\n                    this.$message.success(res)\n                }).catch(err => {\n                    this.$message.error(err);\n                })\n        },\n\n        activateBox(id) {\n            this.$activeDialogId = id;\n            this.startForm.From = this.info.Id;\n            this.startForm.To = id;\n            // console.log(this.$activeDialogId);\n            // console.log()`Activating box with ID: ${id}`);\n            this.startTime = Date.now();  // 紀錄按下開始按鈕的時間戳\n            EventBus.$emit('start-time', this.startTime);\n            this.start();\n        },\n\n\n    },\n\n    mounted() {\n        this.getGameboxes();\n        this.timer = setInterval(this.getGameboxes, 5000);\n        this.getInfo()\n    },\n\n    beforeDestroy() {\n        clearInterval(this.timer);\n    }\n}\n</script>\n\n\n\n<style scoped>\n\n</style>"]}]}