{"remainingRequest":"/home/osboxes/Cardinal_frontend/node_modules/babel-loader/lib/index.js!/home/osboxes/Cardinal_frontend/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/home/osboxes/Cardinal_frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/osboxes/Cardinal_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/osboxes/Cardinal_frontend/src/components/LiveLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/osboxes/Cardinal_frontend/src/components/LiveLog.vue","mtime":1706256252233},{"path":"/home/osboxes/Cardinal_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1706256287886},{"path":"/home/osboxes/Cardinal_frontend/node_modules/babel-loader/lib/index.js","mtime":1706256287673},{"path":"/home/osboxes/Cardinal_frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1706256286671},{"path":"/home/osboxes/Cardinal_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1706256287886},{"path":"/home/osboxes/Cardinal_frontend/node_modules/vue-loader/lib/index.js","mtime":1706256337311}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxpdmVMb2ciLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dzOiBbXSwKICAgICAgc3RyZWFtOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0U3RyZWFtKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgY29uc29sZS5sb2coMTExMSk7CiAgICB0aGlzLnN0cmVhbS5jbG9zZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0U3RyZWFtOiBmdW5jdGlvbiBnZXRTdHJlYW0oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnN0cmVhbSA9IG5ldyBFdmVudFNvdXJjZSh0aGlzLnV0aWxzLmJhc2VVUkwgKyAnL2xpdmVsb2cnKTsKCiAgICAgIHRoaXMuc3RyZWFtLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsKCiAgICAgICAgc3dpdGNoIChkYXRhWydUeXBlJ10pIHsKICAgICAgICAgIGNhc2UgJ3N1Ym1pdF9mbGFnJzoKICAgICAgICAgICAgX3RoaXMucHVzaCh7CiAgICAgICAgICAgICAgdGltZTogZGF0YVsnVGltZSddLAogICAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzLiR0KCdsb2cuc3VibWl0X2ZsYWcnLCB7CiAgICAgICAgICAgICAgICAnZnJvbSc6IGRhdGFbJ01lc3NhZ2UnXVsnRnJvbSddLAogICAgICAgICAgICAgICAgJ3RvJzogZGF0YVsnTWVzc2FnZSddWydUbyddLAogICAgICAgICAgICAgICAgJ2NoYWxsZW5nZSc6IGRhdGFbJ01lc3NhZ2UnXVsnQ2hhbGxlbmdlJ10KICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2NoZWNrX2Rvd24nOgogICAgICAgICAgICBfdGhpcy5wdXNoKHsKICAgICAgICAgICAgICB0aW1lOiBkYXRhWydUaW1lJ10sCiAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXMuJHQoJ2xvZy5jaGVja19kb3duJywgewogICAgICAgICAgICAgICAgJ3RlYW0nOiBkYXRhWydNZXNzYWdlJ11bJ1RlYW0nXSwKICAgICAgICAgICAgICAgICdjaGFsbGVuZ2UnOiBkYXRhWydNZXNzYWdlJ11bJ0NoYWxsZW5nZSddCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLnN0cmVhbS5vbmVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH07CiAgICB9LAogICAgcHVzaDogZnVuY3Rpb24gcHVzaChkYXRhKSB7CiAgICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gMzApIHsKICAgICAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3Muc2xpY2UoMCwgMzApOwogICAgICB9CgogICAgICB0aGlzLmxvZ3MudW5zaGlmdChkYXRhKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["LiveLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA;AAFA,KAAA;AAAA,GAFA;AAMA,EAAA,OANA,qBAMA;AACA,SAAA,SAAA;AACA,GARA;AAUA,EAAA,aAVA,2BAUA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,SAAA,MAAA,CAAA,KAAA;AACA,GAbA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,WAAA,MAAA,GAAA,IAAA,WAAA,CAAA,KAAA,KAAA,CAAA,OAAA,GAAA,UAAA,CAAA;;AACA,WAAA,MAAA,CAAA,SAAA,GAAA,UAAA,KAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA;;AACA,gBAAA,IAAA,CAAA,MAAA,CAAA;AACA,eAAA,aAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,IAAA,CAAA,MAAA,CADA;AAEA,cAAA,OAAA,EAAA,KAAA,CAAA,EAAA,CAAA,iBAAA,EAAA;AACA,wBAAA,IAAA,CAAA,SAAA,CAAA,CAAA,MAAA,CADA;AAEA,sBAAA,IAAA,CAAA,SAAA,CAAA,CAAA,IAAA,CAFA;AAGA,6BAAA,IAAA,CAAA,SAAA,CAAA,CAAA,WAAA;AAHA,eAAA;AAFA,aAAA;;AAQA;;AACA,eAAA,YAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,IAAA,CAAA,MAAA,CADA;AAEA,cAAA,OAAA,EAAA,KAAA,CAAA,EAAA,CAAA,gBAAA,EAAA;AACA,wBAAA,IAAA,CAAA,SAAA,CAAA,CAAA,MAAA,CADA;AAEA,6BAAA,IAAA,CAAA,SAAA,CAAA,CAAA,WAAA;AAFA,eAAA;AAFA,aAAA;;AAOA;AAnBA;AAqBA,OAvBA;;AAwBA,WAAA,MAAA,CAAA,OAAA,GAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OAFA;AAGA,KA9BA;AA+BA,IAAA,IA/BA,gBA+BA,IA/BA,EA+BA;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,aAAA,IAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA;;AACA,WAAA,IAAA,CAAA,OAAA,CAAA,IAAA;AACA;AApCA;AAfA,CAAA","sourcesContent":["<template>\n    <div>\n        <v-simple-table :height=\"200\" v-if=\"logs.length !== 0\">\n            <template v-slot:default>\n                <tbody>\n                <tr v-for=\"(item, index) in logs\" v-bind:key=\"index\">\n                    <td>{{ item.message }}</td>\n                    <td width=\"220px\" style=\"text-align: right;\">{{ new Date(item.time * 1000).toLocaleString() }}</td>\n                </tr>\n                </tbody>\n            </template>\n        </v-simple-table>\n        <div style=\"height: 200px;\" v-else>\n            {{$t('log.no_data')}}\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"LiveLog\",\n        data: () => ({\n            logs: [],\n            stream: null,\n        }),\n        mounted() {\n            this.getStream()\n        },\n\n        beforeDestroy() {\n            console.log(1111)\n            this.stream.close()\n        },\n\n        methods: {\n            getStream() {\n                this.stream = new EventSource(this.utils.baseURL + '/livelog')\n                this.stream.onmessage = (event) => {\n                    let data = JSON.parse(event.data)\n                    switch (data['Type']) {\n                        case 'submit_flag':\n                            this.push({\n                                time: data['Time'],\n                                message: this.$t('log.submit_flag', {\n                                    'from': data['Message']['From'],\n                                    'to': data['Message']['To'],\n                                    'challenge': data['Message']['Challenge'],\n                                })\n                            })\n                            break;\n                        case 'check_down':\n                            this.push({\n                                time: data['Time'],\n                                message: this.$t('log.check_down', {\n                                    'team': data['Message']['Team'],\n                                    'challenge': data['Message']['Challenge'],\n                                })\n                            })\n                            break;\n                    }\n                };\n                this.stream.onerror = function (err) {\n                    console.log(err)\n                };\n            },\n            push(data) {\n                if (this.logs.length > 30) {\n                    this.logs = this.logs.slice(0, 30)\n                }\n                this.logs.unshift(data)\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}